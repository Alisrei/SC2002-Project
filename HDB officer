package sc2002proj;

import java.util.List;

public class HDBOfficer extends User{
	private BTOProject assignedProject;
	private boolean registrationApproved;
	
	
	public HDBOfficer(String nric, String name, String password, int age, boolean isMarried) {
		super(nric, name, password, age, isMarried); // calls the user constructor
	}
	
	public boolean registerAsOfficer(BTOProject project) {
		if (this.assignedProject != null) {
			System.out.println("You are already assigned to a project.");
			return false;
		}
		
		if (project.addOfficer(this)) {
			this.assignedProject = project;
			this.registrationApproved = true;
			return true;
		} else {
			return false;
		}
	}
	
	public void viewAssignedProjectDetails() {
		if (assignedProject != null) {
			assignedProject.displayProjectDetails();
		} else {
			System.out.println("No assigned project.");
		}
	}
	
	public void handleFlatBooking(String unitNumber) {
		if (assignedProject == null) {
			System.out.println("You are not assigned to any project.");
			return;
		}
		
		boolean success = assignedProject.bookFlat(unitNumber);
		if (!success) {
			System.out.println("Booking failed. Please check the unit number.");
		}
		
	}
	
	public boolean isOfficerOfProject(BTOProject project) {
		return assignedProject != null && assignedProject.equals(project);
	}
	
	public BTOProject getAssignedProject() {
		return assignedProject;
	}
	
	public boolean isRegistrationApproved() {
		return registrationApproved;
	}
	
	@Override
	public String toString() {
		return getName() + " (" + getNRIC() + ")";
	}
	
}
